# AZ-104 Azure Administrator

Azure Network Connection Monitor is a network monitoring solution within Azure Network Watcher that helps you monitor network connectivity between:
- Azure VMs
- Virtual networks (VNets)
- Internet endpoints
- On-premises endpoints

Here are the key aspects:

Monitoring Tests:
- Connectivity: Checks if endpoints can communicate
- Latency: Measures network delay
- Packet loss: Tracks data loss between endpoints
- Network topology: Maps the network path between source and destination

Key Components:
1. Test Group
   - A container for multiple test configurations
   - Defines common properties like frequency and thresholds

2. Test Configuration
   - Source endpoints: Where the test originates
   - Destination endpoints: Target resources to test connectivity
   - Test frequency: How often to run tests (default is 5 minutes)
   - Protocol: TCP or HTTP
   - Success thresholds: Define acceptable latency and packet loss

3. Monitoring Agents
   - Network Watcher extension on VMs
   - Log Analytics agent for on-premises servers

Benefits:
- Real-time monitoring of critical network paths
- Early detection of connectivity issues
- Historical data for trend analysis
- Customizable alerts based on thresholds
- End-to-end network visibility

Common Use Cases:
- Monitor connectivity between branch offices
- Verify application availability across regions
- Track performance of hybrid cloud connections
- Troubleshoot network issues proactively

## Container instances

https://learn.microsoft.com/en-us/azure/container-instances/container-instances-container-groups Multi-container groups currently support only Linux containers. For Windows containers, Azure Container Instances only supports deployment of a single container instance. While we are working to bring all features to Windows containers, you can find current platform differences in the service

## Azure AD

You can set expiration policy only for Office 365 groups in Azure Active Directory (Azure AD).

## WebApp

You can validate web app changes in a staging deployment slot before swapping it with the production slot. Deploying an app to a slot first and swapping it into production makes sure that all instances of the slot are warmed up before being swapped into production. This eliminates downtime when you deploy your app. The traffic redirection is seamless, and no requests are dropped because of swap operations. You can automate this entire workflow by configuring auto swap when pre-swap validation isn't needed.
After the swap you can deploy the App1 update to webapp1-test, and then test the update. If the changes swapped into the production slot aren't as per your expectation then you can perform the same swap immediately to get your "last known good site" back.
Reference: https://docs.microsoft.com/en-us/azure/app-service/deploy-staging-slots

## Azure Storage

Encryption scopes enable you to manage encryption with a key that is scoped to a container or an individual blob.
https://learn.microsoft.com/en-us/azure/storage/blobs/encryption-scope-overview#how-encryption-scopes-

Server Message Block (SMB) is used to connect to an Azure file share over the internet. The SMB protocol requires TCP port 445 to be open.

If you define more than one action on the same blob, lifecycle management applies the least expensive action to the blob. For example, action delete is cheaper than action tierToArchive. Action tierToArchive is cheaper than action tierToCool.

To access blob data in the Azure portal with Azure AD credentials, a user must have the following role assignments:
1. A data access role, such as Storage Blob Data Reader or Storage Blob Data Contributor 2. The Azure Resource Manager Reader role, at a minimum
The Reader role is an Azure Resource Manager role that permits users to view storage account resources, but not modify them. It does not provide read permissions to data in Azure Storage, but only to account management resources. The Reader role is necessary so that users can navigate to blob containers in the Azure portal.
Note: in order from least to greatest permissions:
1. The Reader and Data Access role
2. The Storage Account Contributor role
3. The Azure Resource Manager Contributor role 4. The Azure Resource Manager Owner role
Reference: https://docs.microsoft.com/en-us/azure/storage/blobs/assign-azure-role-data-access

AzCopy is a command-line utility that you can use to copy blobs or files to or from a storage account.

You can configure network routing preference for your Azure storage account to specify how network traffic is routed to your account from clients over the internet. By default, traffic from the internet is routed to the public endpoint of your storage account over the Microsoft global network. Azure Storage provides additional options for configuring how traffic is routed to your storage account.

Azure Import/Export service supports the following of storage accounts:
1. Standard General Purpose v2 storage accounts (recommended for most scenarios)
2. Blob Storage accounts
3. General Purpose v1 storage accounts (both Classic or Azure Resource Manager deployments),
Azure Import/Export service supports the following storage types: 1. Import supports Azure Blob storage and Azure File storage
2. Export supports Azure Blob storage
Reference: https://docs.microsoft.com/en-us/azure/storage/common/storage-import-export-requirements


## Network

If a virtual network has address ranges that overlap with another virtual network or on-premises network, the two networks can't be connected.
You can connect virtual networks (VNets) by using the VNet-to-VNet connection type. Virtual networks can be in different regions and from different subscriptions. When you connect VNets from different subscriptions, the subscriptions don't need to be associated with the same Active Directory tenant.


## RBAC

Owner role - Grants full access to manage all resources, including the ability to assign roles in Azure RBAC.

The Contributor role can manage all resources (and add resources) in a Resource Group. Reference:
https://docs.microsoft.com/en-us/azure/role-based-access-control/overview
